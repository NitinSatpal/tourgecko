<div class="hostHome container-fluid theClassToCallTheScope" id="tours">
	<!--<div ng-include="'/modules/hosts/client/views/side-nav.client.view.html'"></div>-->
	<div class="row body-content addproduct-content">
	<toasty></toasty>
		<div class="col-md-12 col-sm-12 col-lg-12 home-content">
			<div ng-include="'/modules/hosts/client/views/add-product/top-nav-product.client.view.html'"></div>
			<div class="add-product">
				<div class="row error-success-notification" ng-if="vm.showErrorsOnTop" id="errorMessageContainer">
					<div class="col-lg-12 col-md-12 col-sm-12 errors">
						<div class="row">
							<div class="col-lg-2 col-md-2 col-sm-2">
								<i class="fa fa-ban" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-md-10 col-sm-10 error-content">
								<span>  
									<h5 ng-if="vm.errorContent.length == 1"> There is {{vm.errorContent.length}} error in this tour </h5>
									<h5 ng-if="vm.errorContent.length > 1"> There are {{vm.errorContent.length}} errors in this tour </h5>
									<ul>
										<li ng-repeat="error in vm.errorContent"> {{error}} </li>
									</ul>
								</span> 
							</div>
						</div>
					</div>
				</div>
				<div class="row error-success-notification" ng-if="vm.showSuccessMsgOnTop" id="successMessageContainer">
					<div class="col-lg-12 col-md-12 col-sm-12 success">
					<span class="success-content"> <b>Great! </b> Tour has been added. <br>
							What is Next? Make sure it has all the details for it to be bookable. <br><br>
							<a href="" ng-click="vm.showTourPreview()">See </a> how it  appears to your customers
					</span>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 pull-right tours_page">
						<a href="#" class="nav-tabs-dropdown btn btn-block btn-default" id="tabSelector">Tabs</a>
						<ul class="nav nav-tabs nav-tabs-horizontal" id="addProductabs">
							<li class="active"><a data-toggle="tab" href="#tours_bd" id="tours_bd_Selector">Basic Details</a></li>
							<li><a data-toggle="tab" href="#tours_pricing" id="tours_pricing_Selector">Pricing</a></li>
							<li><a data-toggle="tab" href="#tours_sa" id="tours_sa_Selector">Schedule Availability</a></li>
							<li><a data-toggle="tab" href="#tours_itinerary" id="tours_itinerary_Selector">Itinerary</a></li>
							<li><a data-toggle="tab" href="#tours_guidelines" id="tours_guidelines_Selector">Guidelines</a></li>
							<li><a data-toggle="tab" href="#tours_media" id="tours_media_Selector">Media</a></li>
						</ul>
						<!-- tab content begins -->
						<form class="form-horizontal" name="vm.form.tourForm" novalidate>
							<div class="tab-content">
								<div id="tours_bd" class="tab-pane fade in active">
									<h5><i class="zmdi zmdi-view-list-alt icn_orange"></i> Set up basic details for this Tour</h5>
									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div class="panel">
												<label class="control-label" style="float: left;">Type: &nbsp; </label> <h5 class="productType"> {{vm.productType ? vm.productType : vm.tour.productType}}</h5>
												<div class="form-group" show-errors>
													<label for="name_of_the_tour" class="control-label">Name this tour</label>
													<div class="input_group">
														<div class="input-group">
															<span class="input-group-addon"><i class="zmdi zmdi-landscape"></i></span>
															<input type="text" class="form-control" name="name_of_the_tour" id="name_of_the_tour"  ng-model="vm.tour.productTitle" placeholder="Ex: Hike to Ratangad" required/>
														</div>
													</div>
													<div class="sub-desc-container" ng-show="vm.helpVisible">
														<i class="zmdi zmdi-lamp"></i>
														<p class="sub_desc">Be creative in naming your tour or activity to make it stand out. <br/>Example: A Trek through mountains of shepherds</p>
													</div>
													<div ng-messages="vm.form.tourForm.name_of_the_tour.$error" role="alert">
									                    <p class="help-block error-text" ng-message="required">Name of the tour is required</p>
									                </div>
												</div>

												<div class="form-group" show-errors>
													<label for="tour_main_destination" class="control-label">Main Destination</label>
													<p class="sub_desc" ng-show="vm.helpVisible">Enter main location or destination for this tour. If this is multi day tour with various destinations, you can enter main regional destination like a state or even country as main destination.</p>
													<div class="input_group">
														<div class="input-group">
															<span class="input-group-addon"><i class="zmdi zmdi-pin"></i></span>
															<input type="text" class="form-control" name="tour_main_destination" id="tour_main_destination" ng-model="vm.tour.destination" placeholder="Ex: Himachal" required/>
														</div>
													</div>
													<div ng-messages="vm.form.tourForm.tour_main_destination.$error" role="alert">
									                    <p class="help-block error-text" ng-message="required">Destination is required</p>
									                </div>
												</div>

												<div class="form-group" show-errors>
													<label for="describe_tour_briefly" class="control-label">Describe this tour briefly</label>
													<p class="sub_desc lheight" ng-show="vm.helpVisible">Describe in few clear sentences what makes this tour unique , what experiences could guest expect and why should it be taken.</p>
													<div class="input_group">
														<div>
															<textarea ck-editor class="form-control" rows="5" id="describe_tour_briefly" name="describe_tour_briefly"></textarea>
														</div>
													</div>
													<div ng-messages="vm.form.tourForm.describe_tour_briefly.$error" role="alert">
									                    <p class="help-block error-text" ng-message="required">Description of the tour is required</p>
									                </div>
												</div>
												<div class="form-group" show-errors>
													<label for="product_tagging" class="control-label">Tag the tour</label>
													<p class="sub_desc lheight" ng-show="vm.helpVisible">You can tag this tour like 'Hiking', 'Cycling' etc. for better understading of what you are offering. You can select from the given option or type any tag and enter.</p>
													<div class="input_group">
														<div>
															<select id="productTagging" name="productTagging" ng-model="vm.tour.productTags" class="form-control" multiple="multiple" style="width:100%">
																<option value="Hiking">Hiking</option>
																<option value="Trekking">Trekking</option>
																<option value="Cycling">Cycling</option>
																<option value="Camping">Camping</option>
															</select>
														</div>
													</div>
												</div>

												<div class="row ">
													<div class="col-sm-6 col-md-6 col-lg-6">
														<div class="form-group">
															<label for="tour_start_location" class="control-label">Start location</label>
															<p class="sub_desc" ng-show="vm.helpVisible">Start location of this tour</p>
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon"><i class="zmdi zmdi-pin"></i></span>
																	<input type="text" class="form-control" name="tour_start_location" id="tour_start_location"  ng-model="vm.tour.pickupLocation" placeholder="Ex: Himachal"/>
																</div>
															</div>
														</div>
													</div>
												</div>
												<div class="row ">
													<div class="col-sm-6 col-md-6 col-lg-6">
														<div class="form-group">
															<label for="tour_end_location" class="control-label">End location</label>
															<p class="sub_desc" ng-show="vm.helpVisible">End location of this tour</p>
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon"><i class="zmdi zmdi-pin"></i></span>
																	<input type="text" class="form-control" name="tour_end_location" id="tour_end_location" ng-model="vm.tour.dropLocation" placeholder="Ex: Mumbai"/>
																</div>
															</div>
														</div>
													</div>
												</div>

												<div class="row">
													<div class="col-sm-6 col-md-6 col-lg-6">
														<div class="form-group">
															<label for="tour_physical_demand" class="control-label">How physically demanding is this tour?</label>
															<p class="sub_desc" ng-show="vm.helpVisible">Grade this tour on level of physical fitness required</p>
															<div class="input_group">
																<div>
																	<select class="form-control" id="pricefor" ng-model="vm.productGrade" ng-click="vm.enableSaveButton()">
																		<option>Select</option>
																		<option>Easy</option>
																		<option>Moderate</option>
																		<option>Hard</option>
																		<option>Challenging</option>
																		<option>Very Challenging</option>
																	</select>
																</div>
															</div>
														</div>
													</div>
												</div>

												<div class="row">
													<div class="col-sm-6 col-md-6 col-lg-6">
														<label class="control-label">What age group is this tour suitable for?</label>
														<div class="row">
															<div class="col-sm-5 col-md-5 col-lg-5 col-xs-5 padding-five">
																<div class="form-group">
																	<div class="input_group">
																		<div>
																			<input type="text" class="form-control" name="tour_start_age" id="tour_start_age" ng-model="vm.tour.productMinAgeRequired" placeholder="min. age"/>
																		</div>
																	</div>
																</div>
															</div>
															<div class="col-sm-2 col-md-2 col-lg-2 col-xs-2">
																<p style="text-align: center; padding: 1em 0;">to</p>
															</div>
															<div class="col-sm-5 col-md-5 col-lg-5 col-xs-5 padding-five">
																<div class="form-group">
																	<div class="input_group">
																		<div>
																			<input type="text" class="form-control" name="tour_end_age" id="tour_end_age" ng-model="vm.tour.productMaxAgeRequired" placeholder="max age"/>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<a class="sub_btn btn btn-primary pull-right" href="#" onclick="changeTab('tours_pricing')">Next &nbsp;&nbsp;<i class="zmdi zmdi-chevron-right"></i></a>
										</div>
										<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
											<div class="tours_help">
												<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
												<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											</div>
										</div> -->
									</div>
								</div>

								<div id="tours_pricing" class="tab-pane fade">
									<h5><i class="zmdi zmdi-money-box icn_orange"></i> Set up price, deposits and cancellation</h5>

									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div class="panel">
												
												<label class="control-label">What is the Price of this tour?</label>
												<p class="section-desc sub_desc" ng-show="vm.helpVisible">You can create multiple pricing options if needed. For example you can add multiple prices for different sizes of groups or have just a single price for everyone. You can also create custom pricing labels and prices.</p>
												<div id="pricingOption{{$index}}" class="row no_margin_row" ng-repeat="pricing in vm.pricingParams track by $index" ng-style="vm.getDynamicCSS($index)">
													<div class="col-sm-12 col-lg-12 col-md-12">
														<label for="pricefor" class="control-label pricefor">Price for</label>
													</div>

													<div class="col-sm-4 col-lg-4 col-md-4 col-xs-12">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<select class="form-control" id="pricefor" ng-model="pricing.pricingType" ng-change="vm.initializePricingOptions($index)">
																		<option>Everyone</option>
																		<option>Adult</option>
																		<option>Child</option>
																		<option>Single</option>
																		<option>Couple</option>
																		<option>Group</option>
																		<option>Custom</option>
																	</select>
																</div>
															</div>
														</div>
													</div>
													<!-- Everyone and Adult Pricing -->
													<div ng-show="pricing.pricingType == 'Everyone' || pricing.pricingType =='Adult' || pricing.pricingType =='Child' || pricing.pricingType =='Single' || pricing.pricingType =='Couple'">
														<div class="col-sm-8 col-lg-8 col-md-8 col-xs-12">
															<div class="form-group">
																<div class="input_group">
																	<div class="input-group">
																		<span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
																		<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.price"  placeholder="Ex: 200" numbers-only/>
																	</div>
																</div>
															</div>
														</div>
														
														<div class="col-sm-12 col-lg-12 col-md-12 col-xs-12 ">
															<div class="form-group">
																<div class="input_group">
																	<div>
																		<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.description"  placeholder="Description"/>
																	</div>
																</div>
															</div>
														</div>
													</div>

													<!-- Group Pricing -->
													<div class="col-sm-4 col-lg-4 col-md-4 col-xs-6" ng-show="pricing.pricingType =='Group'">
														<div class="form-group">
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon minmax">min</span>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.minGroupSize" placeholder="Ex:2" numbers-only/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-4 col-lg-4 col-md-4 col-xs-6" ng-show="pricing.pricingType =='Group'">
														<div class="form-group">

															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon minmax">max</span>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.maxGroupSize" placeholder="Ex:2" numbers-only/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-4 col-lg-4 col-md-4 col-xs-6" ng-show="pricing.pricingType =='Group'">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<select class="form-control" id="pricefor" ng-model="pricing.groupOption">
																		<option>Per Group</option>
																		<option>Per Person</option>
																	</select>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-8 col-lg-8 col-md-8 col-xs-6" ng-show="pricing.pricingType =='Group'">
														<div class="form-group">
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.price" placeholder="Ex:2" numbers-only/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-12 col-lg-12 col-md-12 col-xs-12" ng-show="pricing.pricingType =='Group'">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.description" placeholder="Description"/>
																</div>
															</div>
														</div>
													</div>

													<!-- Custom Pricing -->
													<div class="col-sm-8 col-lg-8 col-md-8 col-xs-12" ng-show="pricing.pricingType =='Custom'">
														<div class="form-group">

															<div class="input_group">
																<div>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.customLabel"  placeholder="custom label"/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-4 col-lg-4 col-md-4 col-xs-12" ng-show="pricing.pricingType =='Custom'">
														<div class="form-group">
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.price" placeholder="Ex: 200" numbers-only/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-8 col-lg-8 col-md-8 col-xs-12" ng-show="pricing.pricingType =='Custom'">
														<div class="form-group">
															<div class="input_group">
																<div class="input-group">
																	<span class="input-group-addon seats_used">Seats Used</span>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.seatsUsed" placeholder="Ex: 2" numbers-only/>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-12 col-lg-12 col-md-12 col-xs-12" ng-show="pricing.pricingType =='Custom'">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<input type="text" class="form-control" name="pf_price" id="" ng-model="pricing.description" placeholder="Description"/>
																</div>
															</div>
														</div>
													</div>
													<a href="#" class="close_group" ng-hide="$index == 0" ng-click="vm.removePricingOption($index)"><i class="zmdi zmdi-close"></i></a>
													<a href="#" class="add_price_option" ng-click="vm.addPricingOption($index)" ng-show="$index == vm.pricingParams.length - 1 || vm.pricingParams.length == 0">Add more price option</a>
												</div>
												<div class="form-group">
													<label for="starting_price" class="control-label">Starting Price</label>
													<p class="sub_desc" ng-show="vm.helpVisible">This is used for display purpose. Use the lowest price.</p>
													<div class="input_group">
														<div class="input-group">
															<span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
															<input type="text" class="form-control" name="starting_price" id="starting_price"  ng-model="vm.tour.productAdvertisedprice" placeholder="Ex: 3000" allow-decimal-numbers/>
														</div>
													</div>
												</div>
											</div>
											<div class="panel">
												<h5>
													Are there addon services?
														<div class="formonoffswitch addon-onoff">
															<input type="checkbox" name="addon-onoffswitch" class="formonoffswitch-checkbox" id="addon-onoffswitch" ng-model="vm.isAddonAvailable" ng-click="vm.enableSaveButton()">
															<label class="formonoffswitch-label" for="addon-onoffswitch"></label>
														</div>
												</h5>
												<p class="sub_desc" ng-show="vm.helpVisible">Addon is extra service or item that can be offered to guest for additional price . For example, a private tent on a trekking tour, separate room,or insurance etc.</p>
												<div class="addon-panel" ng-show="vm.isAddonAvailable">
													<div class="row no_margin_row" ng-repeat="addon in vm.addonParams.params track by $index" ng-style="vm.getDynamicCSS($index)">
														<div class="col-sm-4 col-lg-4 col-md-4">
															<div class="form-group">
																<label for="addon_name_one" class="control-label">Addon</label>
																<p class="sub_desc lheight">Name of Addon</p>
																<div class="input_group">
																	<div>
																		<input type="text" name="addon_name_one" class="form-control" id="addon_name_one" ng-model="addon.name" placeholder="E.g. Personal tent">
																	</div>
																</div>
															</div>
														</div>
														<div class="col-sm-4 col-lg-4 col-md-4">
															<div class="form-group">
																<label for="addon_price" class="control-label">Price</label>
																<p class="sub_desc lheight">Approx value</p>
																<div class="input_group">
																	<div class="input-group">
																		<span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
																		<input type="text" name="addon_price" class="form-control" id="addon_price" ng-model="addon.price" placeholder="Ex: 200" numbers-only>
																	</div>
																</div>
															</div>
														</div>
														<div class="col-sm-4 col-lg-4 col-md-4">
															<div class="form-group">
																<label for="addon_apply" class="control-label">Apply as</label>
																<p class="sub_desc lheight">How to apply this price</p>
																<div class="input_group">
																	<div>
																		<select class="form-control" id="addon_apply" ng-model="addon.applyAs">
																			<option>Per Booking</option>
																			<option>Per Seat</option>
																			<option>Guest Choice</option>
																		</select>
																	</div>
																</div>
															</div>
														</div>
														<div class="col-sm-12 col-lg-12 col-md-12">
															<div class="form-group">
																<label for="addon_Description" class="control-label">Description</label>
																<div class="input_group">
																	<div>
																		<input type="text" name="addon_Description" class="form-control" id="addon_Description" ng-model="addon.description" placeholder="Short description to explain what this addon is">
																	</div>
																</div>
															</div>
															<a href="#" class="add_addon" ng-click="vm.addMoreAddons()" ng-show="$index == vm.addonParams.params.length - 1"><i class="zmdi zmdi-plus"></i> Add more </a>&nbsp;&nbsp;
	                                                   		<a href="#" class="delete_addon pull-right" ng-click="vm.removeAddon($index)"><i class="zmdi zmdi-delete"></i> Delete</a>
														</div>
													</div>
												</div>

												<!--<hr>
												<h5>
													Does this Tour require a deposit?
														<div class="formonoffswitch deposit-onoff">
															<input type="checkbox" name="deposit-onoffswitch" class="formonoffswitch-checkbox" id="deposit-onoffswitch" ng-model="vm.isDepositApplicable" ng-click="vm.enableSaveButton()">
															<label class="formonoffswitch-label" for="deposit-onoffswitch"></label>
														</div>
												</h5>
												<p class="sub_desc" ng-show="vm.helpVisible">You can set deposit on tours that have upfront cost.</p>
												<div class="deposit-panel" ng-show="vm.isDepositApplicable" ng-style="vm.getDynamicCSS(0)">
													<div class="row no_margin_row">
														<div class="col-sm-4 col-lg-4 col-md-4">
															<div class="form-group">
																<label for="deposit_price" class="control-label">Price</label>
																<p class="sub_desc lheight">Percent value</p>
																<div class="input_group">
																	<div class="input-group">
																		<input type="text" name="deposit_price" class="form-control" id="deposit_price" ng-model="vm.tour.depositAmount" placeholder="Ex: 50">
																		<span class="input-group-addon">% of List price</span>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div> -->
											</div>
											<hr>
											<div class="panel">
												<h5 >
													Cancellation and refund  policy
												</h5>
												<p class="sub_desc lheight">Mention cancellation and refund policy that you will apply on this tour. This is shown on tour details page.</p>
												<div class="input_group">
	                                             	<div>
	                                                	<textarea ck-editor class="form-control" rows="5" id="cancellationPolicies" name="cancellationPolicies" placeholder="Text area for writing cancellation policies"></textarea>
	                                             	</div>
	                                          	</div>
                                          	</div>

                                          	<br>


											<a class="sub_btn btn btn-primary pull-left" href="#" onclick="changeTab('tours_bd')"><i class="zmdi zmdi-chevron-left"></i>&nbsp;&nbsp;Prev</a>
											<a class="sub_btn btn btn-primary pull-right" href="#" onclick="changeTab('tours_sa')">Next &nbsp;&nbsp;<i class="zmdi zmdi-chevron-right"></i></a>
										</div>
										<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
											<div class="tours_help">
												<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
												<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											</div>
										</div> -->
									</div>
								</div>

								<div id="tours_sa" class="tab-pane fade">
									<h5><i class="zmdi zmdi-time icn_orange"></i> Duration , Dates and Availability</h5>
									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div class="panel">
												<label for="tours_sa_date_time" class="control-label">How long is this tour?</label>
												<div class="row no_margin_row">
													<div class="col-sm-6 col-md-3 col-lg-3 col-xs-4 padding-five">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<input type="text" class="form-control" name="tours_sa_date_time" id="tours_sa_date_time"  ng-model="vm.tour.productDuration" placeholder="Ex: 5" required/>
																</div>
																<div ng-messages="vm.form.tourForm.tours_sa_date_time.$error" role="alert">
												                    <p class="help-block error-text" ng-message="required">Duration of the tour is required</p>
												                </div>
															</div>
														</div>
													</div>
													<div class="col-sm-2 col-md-2 col-lg-2 col-xs-3">
														<div class="days_radio">
															<label class="radio_label">
																<input type="radio" name="datetime" value="Days" ng-model="vm.productDurationType"/>
																<span>Days</span>
																<i class="zmdi zmdi-check-circle"></i>
																<i class="zmdi zmdi-circle-o"></i>
															</label>
														</div>
													</div>
													<div class="col-sm-2 col-md-2 col-lg-2 col-xs-3">
														<div class="days_radio">
															<label class="radio_label">
																<input type="radio" name="datetime" value="Hours" ng-model="vm.productDurationType" ng-click="vm.enableSaveButton()"/>
																<span>Hours</span>
																<i class="zmdi zmdi-check-circle"></i>
																<i class="zmdi zmdi-circle-o"></i>
															</label>
														</div>
													</div>
												</div>
												<div class="brdr"></div>
                                             	<div class="tour-availability">
													<label for="tours_sa_date_time" class="control-label">How is this tour made Available ?
													</label>
													<p class="sub_desc" ng-show="vm.helpVisible">You can make tours available as fixed dated tours with fixed schedule for departure   or open dated where guest can chose date of departure while booking. Fixed date  tours are often group tours whereas open date tours are used for personalized or private tours.</p>
													<div class="row no_margin_row tour-availability-options">
														<div class="col-sm-6 col-md-6 col-lg-3 col-xs-4">
															<div class="days_radio text_align_left">
																<label class="radio_label">
																	<input type="radio" name="time_required" value="unavailable" ng-model="vm.productAvailabilityType"/>
																	<span>Unavailable</span>
																	<i class="zmdi zmdi-check-circle"></i>
																	<i class="zmdi zmdi-circle-o"></i>
																</label>
															</div>
														</div>
														<div class="col-sm-6 col-md-6 col-lg-3 col-xs-4">
															<div class="days_radio text_align_left">
																<label class="radio_label">
																	<input type="radio" name="time_required" value="Open Date" ng-model="vm.productAvailabilityType"/>
																	<span>Open Dates</span>
																	<i class="zmdi zmdi-check-circle"></i>
																	<i class="zmdi zmdi-circle-o"></i>
																</label>
															</div>
														</div>
														<div class="col-sm-6 col-md-6 col-lg-3 col-xs-4 fixedDepartureAddTourMobile">
															<div class="days_radio text_align_left">
																<label class="radio_label">
																	<input type="radio" name="time_required" value="Fixed Departure" id="fixedDepartureRadio" ng-model="vm.productAvailabilityType" ng-click="vm.enableSaveButton()"/>
																	<span id="notOnMobile">Fixed Departure</span>
																	<p id="onMobile" style="display: none;"><span>Fixed Departure</span></p>
																	<i class="zmdi zmdi-check-circle"></i>
																	<i class="zmdi zmdi-circle-o"></i>
																</label>
															</div>
														</div>
													</div>
													<div class="row no_margin_row tours_sa_unavailable pointer-box" id="unavailablePanel">
														<div class="pointer-line">
															<img class="pointer pointer_c" src="modules/hosts/client/images/pointer.svg">
														</div>

														<div class="col-sm-12 col-md-12 col-lg-12">
		                                                  <div class="form-group">
		                                                  	<label for="tours_sa_timeslot" class="control-label">This tour is marked Unavailable. Guest can see but not book it.</label>
		                                                   </div>
		                                                </div>
													</div>
													<div class="row no_margin_row tours_sa_open_dates pointer-box">
														<div class="pointer-line">
															<img class="pointer pointer_a" src="modules/hosts/client/images/pointer.svg">
														</div>
														<div class="col-sm-12 col-md-12 col-lg-12">
															<label for="tours_sa_timeslot" class="control-label">Is time required for booking?</label>
															<p class="sub_desc lheight" ng-show="vm.helpVisible">If guest need to select a timeslot during booking.</p>
														</div>
														<div class="col-md-4 col-lg-4 col-sm-12 col-xs-12">
															<div class="form-group">
																<div class="input_group">
																	<div>
																		<select class="form-control" id="tours_sa_timeslot" ng-model="productTimeSlotsAvailability" name="tours_sa_timeslot" onchange="addSelectorElement('#tours_sa_timeslot', 0)" ng-click="vm.enableSaveButton()">
																			<option value="No Time Required">No time required</option>
																			<option value="Fixed Slots">Fixed Times</option>
																			<!-- <option value="Guest Choice">Guest Choice</option> -->
																		</select>
																	</div>
																</div>
															</div>
														</div>

														<div class="row fixed_timeslot">
															<div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
																<label for="tours_sa_timeslots" class="control-label">Time Slots</label>
															</div>
															
															<div class="form-group" id="addSelectorHere">
                                                        		
                                                            </div>
	                                                       
	                                                        <div class="col-sm-12 col-md-12 col-lg-12">
	                                                        	<a href="#" class="add_more_time-slots" id="addMoreTimeslots" onclick="createDynamicTimeslotSelection()"><i class="zmdi zmdi-plus"></i> Add more</a>
	                                                        </div>
														</div>
														<div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
															<label for="tours_sa_monthslot" class="control-label">Is this tour offered throughout year?</label>
															<div class="formonoffswitch tours_sa_ty">
																<input type="checkbox" name="tours_sa_ty-onoffswitch" class="formonoffswitch-checkbox" id="tours_sa_ty-onoffswitch" ng-model="vm.isProductAvailabileAllTime">
																<label class="formonoffswitch-label" for="tours_sa_ty-onoffswitch"></label>
															</div>
															<p class="sub_desc" ng-show="vm.helpVisible" style="margin-top:5px;">You can select the months when this tour is not available. Guest can only create bookings in months that are not marked as unavailable</p>
														</div>

														<div class="col-sm-12 col-md-12 col-lg-12 available_months" ng-show="!vm.isProductAvailabileAllTime">
															<div class="form-group">
																<label class="control-label">Non-Available months</label><br>

																<select id="months" multiple="multiple" ng-model="vm.tour.productUnavailableMonths" style="overflow: hidden;text-overflow: ellipse;">

				                                                    <option value="january">January</option>
				                                                    <option value="february">February</option>
				                                                    <option value="march">March</option>
				                                                    <option value="april">April</option>
				                                                    <option value="may">May</option>
				                                                    <option value="june">June</option>
				                                                    <option value="july">July</option>
				                                                    <option value="august">August</option>
				                                                    <option value="september">September</option>
				                                                    <option value="october">October</option>
				                                                    <option value="november">November</option>
				                                                    <option value="december">December</option>
			                                                	</select>
															</div>
														</div>
													</div>

													<div class="row no_margin_row tours_sa_fixed_departure pointer-box" id="fixedDeparturePanel">
														<div class="pointer-line">
															<img class="pointer pointer_b" src="modules/hosts/client/images/pointer.svg">
														</div>
														<div class="col-sm-12 col-md-12 col-lg-12">
															<br>
															<div class="row">
									                            <div class="col-sm-8 col-md-8 col-lg-8 col-xs-6 departureSession_section">
																	<a href="" data-target="#departureSession" ng-click="vm.openDepartureSessionModal()" id="fixedDepartureSessionCreationModalTrigger"><i class="zmdi zmdi-calendar"></i> Create departure session</a>
															   	</div>
															   	<div class="col-sm-4 col-md-4 col-lg-4 col-xs-6 departureSession_section">
																	<a href="" data-target="#departureSession" ng-click="vm.showTheList = !vm.showTheList" ng-show="vm.showTheList == false || vm.showTheList == undefined"> Show schedule</a>
																	<a href="" data-target="#departureSession" ng-click="vm.showTheList = !vm.showTheList" ng-show="vm.showTheList == true"> Hide schedule</a>
															   	</div>

															</div>
															<br>
														</div>
				               							<div class="row fixedDatedTourSessionsAddProductPage" ng-if="vm.showTheList">
															<div class="col-sm-12 col-md-12 col-lg-12  fixed-date-availability">
																<div class="row">
																	<ul class="nav nav-tabs" role="tablist" style="margin-top: 0 !important">
																	    <li role="presentation" class="active">
																	    	<a href="#current" aria-controls="home" role="tab" data-toggle="tab" aria-expanded="true" id="sessionsCreatedAndUnsaved">Current</a>
																	    </li>
																	    <li role="presentation" class="">
																	    	<a href="#past" aria-controls="profile" role="tab" id="sessionsCreatedAndSaved" data-toggle="tab" aria-expanded="false">Past</a>
																	    </li>
																	</ul>
																	<div class="tab-content">
														            	<div role="tabpanel" class="tab-pane active" id="current">
														            		<div class="card" ng-repeat="savedSession in vm.fixedProductScheduleOld track by $index" ng-if="vm.checkISThisFuture(vm.fixedProductScheduleOld[$index].startDate)">
														                		<h5>{{vm.sessionInternalNamesOld[$index]}}</h5>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Starts:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductScheduleOld[$index].startDate)}} {{vm.fixedProductScheduleOld[$index].startTime}}</span></p>
															                        <p><label>Until:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductScheduleOld[$index].repeatTillDate)}}</span></p>
															                    </div>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Repeats:</label> <span>{{vm.fixedProductScheduleOld[$index].repeatBehavior}}</span></p>
															                        <p><label>Capacity:</label> <span>{{!vm.fixedProductScheduleCapacitiesOld[$index].sessionSeatLimit ? '-' : vm.fixedProductScheduleCapacitiesOld[$index].sessionSeatLimit}}</span></p>
															                    </div>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <!-- <p><a href="" ng-click="vm.viewThisSession($index, true)">View</a></p> -->
															                        <p><a href="" ng-click="vm.editThisSession($index, true)">Edit</a></p>
															                        <p><a href="" ng-click="vm.deleteThisSession($index, true)">Delete</a></p>
															                    </div>
														                	</div>
														                	<div class="card" ng-repeat="currentSession in vm.fixedProductSchedule track by $index" id="unsavedCurrentSession{{$index}}">
														                		<h5>{{vm.sessionInternalNames[$index]}}</h5>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Starts:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductSchedule[$index].startDate)}} {{vm.fixedProductSchedule[$index].startTime}}</span></p>
															                        <p><label>Until:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductSchedule[$index].repeatTillDate)}}</span></p>
															                    </div>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Repeats:</label> <span>{{vm.fixedProductSchedule[$index].repeatBehavior}}</span></p>
															                        <p><label>Capacity:</label> <span>{{!vm.fixedProductScheduleCapacities[$index].sessionSeatLimit ? '-' : vm.fixedProductScheduleCapacities[$index].sessionSeatLimit}}</span></p>
															                    </div>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <!--<p><a href="" ng-click="vm.viewThisSession($index, false)">View</a></p> -->
															                        <p><a href="" ng-click="vm.editThisSession($index, false)">Edit</a></p>
															                        <p><a href="" ng-click="vm.deleteThisSession($index, false)">Delete</a></p>
															                    </div>
														                	</div>
														                	<div class="text-center" ng-if=" vm.fixedProductSchedule.length == 0 && !vm.futureSessionPresent">
														                		<h5>No curent sessions created</h5>
														                	</div>
														            	</div>
														            	<div role="tabpanel" class="tab-pane" id="past">
								                                            <div class="card" ng-repeat="savedSession in vm.fixedProductScheduleOld track by $index" ng-if="vm.checkISThisPast(vm.fixedProductScheduleOld[$index].startDate)">
														                		<h5>{{vm.sessionInternalNamesOld[$index]}}</h5>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Starts:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductScheduleOld[$index].startDate)}} {{vm.fixedProductScheduleOld[$index].startTime}}</span></p>
															                        <p><label>Until:</label> <span>{{vm.getDepartureDateOfSession(vm.fixedProductScheduleOld[$index].repeatTillDate)}}</span></p>
															                    </div>
															                    <div class="col-lg-4 col-md-4  col-sm-4  col-xs-12 grey-text">
															                        <p><label>Repeats:</label> <span>{{vm.fixedProductScheduleOld[$index].repeatBehavior}}</span></p>
															                        <p><label>Capacity:</label> <span>{{!vm.fixedProductScheduleCapacitiesOld[$index].sessionSeatLimit ? '-' : vm.fixedProductScheduleCapacitiesOld[$index].sessionSeatLimit}}</span></p>
															                    </div>
														                	</div>
														                	<div class="text-center" ng-if=" vm.fixedProductScheduleOld.length == 0 || !vm.pastSessionPresent">
														                		<h5>No past sessions present</h5>
														                	</div>
								                                        </div>                                      
																	</div>
																</div>
															</div>
														</div>
													</div>
													
													<hr>
													<div class="row no_margin_row">
														<div class="col-sm-12 col-md-12 col-lg-12">
															<label for="tours_sa_notice" class="control-label">How many seats can be booked per booking?
															</label>
														</div>

														<div class="col-sm-6 col-md-3 col-lg-3 col-xs-6">
															<div class="input_group from-to">
																<div class="form-group">
	                                                               <div class="input-group">
	                                                                  <span class="input-group-addon">Min</span>
	                                                                  <input type="text" class="form-control" name="pf_price"  placeholder="Ex: 200" ng-model="vm.tour.minSeatsPerBookingRequired">
	                                                               </div>
	                                                            </div>
	                                                        </div>
	                                                    </div>

	                                                    <div class="col-sm-6 col-md-3 col-lg-3 col-xs-6">
	                                                        <div class="input_group from-to">
	                                                        	<div class="form-group">
	                                                               <div class="input-group">
	                                                                  <span class="input-group-addon">Max</span>
	                                                                  <input type="text" class="form-control" name="pf_price" placeholder="Ex: 200" ng-model="vm.tour.maxSeatsPerBookingAllowed">
	                                                               </div>
	                                                            </div>
	                                                        </div>
	                                                    </div>
													</div>

													<div class="row no_margin_row">
														<div class="col-sm-6 col-md-6 col-lg-6">
															<label for="tours_sa_notice" class="control-label">What is the minimum notice needed to book this Tour?</label>
															<div class="form-group">
																<div class="input_group">
																	<div class="input-group">
																		<input type="text" class="form-control" name="tours_sa_notice" id="tours_sa_notice"  ng-model="vm.tour.productMinNoticeDays" placeholder="Ex: 15"/>
																		<span class="input-group-addon">Days before departure date.</span>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<a class="sub_btn btn btn-primary pull-left" href="#" onclick="changeTab('tours_pricing')">
												<i class="zmdi zmdi-chevron-left">&nbsp;&nbsp;Prev</i>
											</a>
												<a class="sub_btn btn btn-primary pull-right" href="#" onclick="changeTab('tours_itinerary')">Next &nbsp;&nbsp;<i class="zmdi zmdi-chevron-right"></i></a>
											<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
												<div class="tours_help">
													<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
													<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
												</div>
											</div> -->
										</div>
									</div>
								</div>

								<div id="tours_itinerary" class="tab-pane fade">
									<h5><i class="zmdi zmdi-view-list-alt icn_orange"></i> Detailed Itinerary</h5>
									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div style="margin-left:12px;">
											<h4>Create detailed itinerary of this tour</h4>
											<p class="sub_desc" ng-show="vm.helpVisible">Let Guests know what happens through the tour on each day. Be descriptive so that Guests know what to expect.</p>
											</div>
											<hr>
											<div>
								              <div ng-repeat="desc in vm.itineraries track by $index" class="selectedItemsDiv">
								              	<div class="panel">
								              		<b>Day {{vm.itineraries[$index].day}}</b>
								              		<br>
								              		<!-- Button section -->
								              		 <a href="#" style="float:right;margin-right:10px;" ng-click="vm.deleteItinerary($index)" ng-show="!vm.showEditItineraryElements"> Delete </a>

									                <a href="#" style="float:right;margin-right:10px;" ng-click="vm.editItinerary($index)" ng-show="!vm.showEditItineraryElements"> Edit &nbsp;&nbsp;</a>

									               
									                <a href="#" style="float:right;margin-right:10px;" ng-click="vm.cancelItineraryEdit($index)" ng-show="vm.showEditItineraryElements && $index == vm.editIndex"> Cancel </a>
									                <a href="#" style="float:right;margin-right:10px;" ng-click="vm.saveEditedItinerary($index)" ng-show="vm.showEditItineraryElements && $index == vm.editIndex"> Save </a>
									                
									                <!-- Button section ends here -->

									                <!-- Bind the heading and display-->
									                <ng-bind-html="vm.getHtmlTrustedData(desc.title)">
									                <b> Headline </b> <p ng-show="vm.showCreatedItinerary" ng-bind-html="desc.title | htmlData"></p>
									                
									                <!-- If host click edit this itinerary, open input text -->
									                <input type="text" class="form-control" name="itinerary_editheadline" id="itinerary_editheadline"  placeholder="" ng-model="vm.editHeading" ng-show="vm.showEditItineraryElements && $index == vm.editIndex"/>
									                <br>

									                <!-- Bind the description and display-->
									                <ng-bind-html="vm.getHtmlTrustedData(desc.description)">
									                <b> Detail </b><p ng-show="vm.showCreatedItinerary" class="renderedChild" ng-bind-html="desc.description | htmlData"></p>

									                <!-- If host click edit itinerary, open this rich textbox-->
									                <textarea ng-show="vm.showEditItineraryElements && $index == vm.editIndex" ck-editor class="form-control" rows="5" id="editItinerary{{$index}}" name="editItinerary{{$index}}"></textarea>
								                </div>
								                <hr>
								              </div>
								            </div>
											<div class="panel">
												<div class="itinerary_panel_container" ng-show="!vm.doneClicked">
													<p class="itinerary_day" ng-show="vm.calculatedDay" ng-click="vm.changeDay();"><i class="zmdi zmdi-pin-drop"></i> Day {{vm.dayCounter}}</p>
													<p class="itinerary_day" ng-show="!vm.calculatedDay"><i class="zmdi zmdi-pin-drop"></i> Day <input type="text" ng-model="vm.dayCounter" class="itinerary_day_Edit"></p>
													<br>
													<p class="sub_desc itinerary_day_Help" ng-show="vm.helpVisible && vm.calculatedDay">Click on Day to edit the Day number</p>
													<div class="form-group">
														<label for="itinerary_headline" class="control-label">Headline</label>
														<p class="sub_desc" ng-show="vm.helpVisible">Headline to sum up the day's activities to guest, E,g if this is trekking tour, headline of day can be â€œWalking 10 km from base village to camp 1</p>
														<div class="input_group">
															<div>
																<input type="text" class="form-control" name="itinerary_headline" id="itinerary_headline"  placeholder="" ng-model="vm.heading" ng-change="vm.enableSaveButton()"/>
															</div>
														</div>
													</div>
													<div class="form-group">
														<label for="itinerary_headline" class="control-label">Detail</label>
														<p class="sub_desc" ng-show="vm.helpVisible">Describe in detail what happens through this day</p>
														<div class="input_group">
															<div>
																<textarea ck-editor class="form-control" rows="5" id="tourItinerary" name="tourItinerary"></textarea>
															</div>
														</div>
													</div>
													
													<a href="" class="add_itinerary_day" ng-click="vm.createItinerary(false)"><i class="zmdi zmdi-plus"></i> Add another day</a>
													<a href="" class="add_itinerary_done " ng-click="vm.createItinerary(true)"> Done</a>
												</div>
												<a href="" class="add_itinerary_day" ng-click="vm.createItinerary(false)" ng-show="vm.doneClicked"><i class="zmdi zmdi-plus"></i> Add another day</a>
											</div>
											<a class="sub_btn btn btn-primary pull-left" href="#" onclick="changeTab('tours_sa')">
												<i class="zmdi zmdi-chevron-left">&nbsp;&nbsp;Prev</i>
											</a>
											<a class="sub_btn btn btn-primary pull-right" href="#" onclick="changeTab('tours_guidelines')">Next &nbsp;&nbsp;<i class="zmdi zmdi-chevron-right"></i></a>
										</div>
										<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
											<div class="tours_help">
												<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
												<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											</div>
										</div> -->
									</div>
								</div>

								<div id="tours_guidelines" class="tab-pane fade">
									<h5><i class="zmdi zmdi-view-list-alt icn_orange"></i> Guidelines , Inclusions, exclusions</h5>
									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div class="panel">
												<div class="form-group">
													<label for="tour_guidelines" class="control-label">What are the guidelines that Guests should know?</label>
													<p class="sub_desc lheight" ng-show="vm.helpVisible">You can describe things to carry, clothes to wear, things to know , rules, Dos and Donâ€™t etc.</p>
													<div class="input_group">
														<div>
															<textarea ck-editor class="form-control" rows="5" id="tour_guidelines" name="tour_guidelines"></textarea>
														</div>
													</div>
												</div>
												<div class="form-group">
													<label for="tour_inclusions" class="control-label">Inclusions</label>
													<p class="sub_desc lheight" ng-show="vm.helpVisible">Describe what is included in tour and its price. For example meals , accommodations, guide etc.</p>
													<div class="input_group">
														<div>
															<textarea ck-editor class="form-control " rows="5" id="tour_inclusions" name="tour_inclusions"></textarea>
														</div>
													</div>
												</div>
												<div class="form-group">
													<label for="tour_exclusions" class="control-label">Exclusions</label>
													<p class="sub_desc lheight" ng-show="vm.helpVisible">Describe what is excluded from tour and its price. For example Visa, flights, insurance etc.</p>
													<div class="input_group">
														<div>
															<textarea ck-editor class="form-control" rows="5" id="tour_exclusions" name="tour_exclusions" ></textarea>
														</div>
													</div>
												</div>
											</div>
											<a class="sub_btn btn btn-primary pull-left" href="#" onclick="changeTab('tours_itinerary')"><i class="zmdi zmdi-chevron-left">&nbsp;&nbsp;Prev</i></a>
											<a class="sub_btn btn btn-primary pull-right" href="#" onclick="changeTab('tours_media')">Next&nbsp;&nbsp;<i class="zmdi zmdi-chevron-right"></i></a>
										</div>
										<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
											<div class="tours_help">
												<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
												<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											</div>
										</div> -->
									</div>
								</div>

								<div id="tours_media" class="tab-pane fade">
									<h5><i class="zmdi zmdi-collection-image-o icn_orange"></i> Images</h5>
									<div class="row error-success-image-upload" ng-show="showImageUploadErrorsBlock" id="imageUploadErrorBlock">
										<div class="col-lg-12 col-md-12 col-sm-12 errors">
											<div class="row">
												<div class="col-lg-2 col-md-2 col-sm-2">
													<i class="fa fa-ban" aria-hidden="true"></i>
												</div>
												<div class="col-lg-10 col-md-10 col-sm-10 error-content">
													<span>  
														<h5 ng-if="vm.singleImageUploadError"> There is {{imageUploadErrorContent.length}} error in image upload </h5>
														<h5 ng-if="vm.multipleImageUploadError"> There are {{imageUploadErrorContent.length}} errors in image upload </h5>
														<ul>
															<li ng-repeat="error in imageUploadErrorContent track by $index"> {{error}} </li>
														</ul>
													</span> 
													<h5> PS: Invalid images are removed automatically</h5>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div id="tour_main_content" class="col-lg-10 col-md-10 col-sm-10 col-xs-12 tour_main_content">
											<div class="panel" id="mediaPanel">
												<div class="row no_margin_row">
													<label for="tours_sa_limited" class="control-label">Images</label>
	                                                <p class="sub_desc">Make Tour Listing appealing by adding images. First image is used as cover picture for listing.</p>
	                                                <div class="col-lg-12 col-md-12 col-sm-12">
	                                                    <div id="product-photo-uploader"></div>
		                                                <br>
	                                                   <p class="sub_desc"><i class="zmdi zmdi-lamp icn_orange"></i> <span>Pictures speak thousand words .Guests are incited to travel by images and visuals. Use high definition photos of the destination</span></p>

														<hr/>
														<br>
	                                                </div>
													
													<!-- For now we have not thought about video link and maps -->
													<!--<label for="tours_media_video" class="control-label">Video link</label>
														<p class="sub_desc" ng-show="vm.helpVisible">If you have videos of your tour , link them through YouTube or other channels</p>
													<div class="col-sm-12 col-md-12 col-lg-12">
														<div class="form-group">
															<div class="input_group">
																<div>
																	<input type="text" class="form-control" name="tours_media_video" id="tours_media_video" placeholder="video link"/>
																</div>
															</div>
														</div>
														<hr>
														<br>
													</div>

													<label for="tours_media_map" class="control-label">Tour map</label>
														<p class="sub_desc" ng-show="vm.helpVisible">If you have tour map created externally, upload it as image here</p>
													<div class="col-sm-12 col-md-12 col-lg-12">
													<div id="product-map-uploader"></div>
													</div> -->
												</div>
											</div>
											<a class="sub_btn btn btn-primary pull-left" href="#" onclick="changeTab('tours_guidelines')"><i class="zmdi zmdi-chevron-left">&nbsp;&nbsp;Prev</i></a>
										</div>
										<!-- <div class="col-sm-2 col-md-2 col-lg-2 tour_help_info hidden-xs">
											<div class="tours_help">
												<h3><i class="zmdi zmdi-help-outline"></i> Help</h3>
												<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											</div>
										</div> -->
									</div>
								</div>
							</div>
							<div ng-show="vm.error" class="text-danger">
					          <strong ng-bind="vm.error"></strong>
					        </div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal -->
	<div class="modal verticalScroll" id="departureSession" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header" style="border-bottom: none !important">
					<button type="button" class="close" id="closeDepartureSession" ng-click="vm.markAsSessionNotCreated()">&times;</button>
					<h4 class="modal-title">Create fixed departure Session</h4>
				</div>
				<!-- Added by Gaurav  for tabs start -->
	            <!-- Added by Gaurav  for tabs end -->
				<div class="modal-body tab-content" style="overflow: visible;">
					<ul class="nav nav-tabs" id="navTabsForDepartureSession">
		              	<li class="active" id="dateAndTime">
		              		<a data-toggle="tab" href="#session_dt">Date and Time</a>
		              	</li>
		              	<li id="repeatSession">
		              		<a data-toggle="tab" href="#session_repeat">Repeat</a>
		              	</li>
		              	<li id="priceAndCapacity">
		              		<a data-toggle="tab" href="#tours_Pc">Price and Capacity</a>
		              	</li>
		            </ul>
			        
					<div id="session_dt" class="tab-pane fade in active">
						<div class="row">
							<div class="col-sm-12 col-md-12 col-lg-12">
								<div class="form-group">
								   	<label for="repeatSeriesName" class="control-label">Name</label>
								   	<p class="sub_desc"> Name is used only internally for your reference and is not shown  to guests while booking.</p>
									<div class="input-group">
										 <div class="input-group">
										 	<input class="form-control" id="sessionName" name="sessionName" placeholder="Session name" type="text" ng-model="vm.sessionName" required ng-disabled="vm.onlyCapacityEditAllowed">
										 </div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6 col-md-6 col-lg-6">
								<div class="form-group">
								  <label for="dsStartDate" class="control-label">Start Date</label>
								  <div class="input_group">
									 <div class="input-group">
									 	<input class="form-control" id="dsStartDate" name="dsStartDate" placeholder="Departure Session Date" type="" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].startDate" required ng-disabled="vm.onlyCapacityEditAllowed">
									 	<span class="input-group-addon" id="dsStartDateCalendarIcon">
									 		<i class="fa fa-calendar" aria-hidden="true"></i>
									 	</span>
									 </div>
								  </div>
								</div>
							</div>
						</div>
						<div class="row">
							 <div class="col-sm-12 col-md-12 col-lg-12">
							 	<div class="form-group">
								   <label for="sdSTimeSwitch" class="control-label">Need to mention a starting time?</label>
								   <div class="fixedTouronoffswitch fixed-departure-onoffswitch tours_sd_st">
									  <input type="checkbox" name="tours_sd_st-onoffswitch" class="fixedTouronoffswitch-checkbox" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].isFixedTourTimeSlotAvailable" id="tours_sd_st-onoffswitch" ng-disabled="vm.onlyCapacityEditAllowed">
									  <label class="fixedTouronoffswitch-label" for="tours_sd_st-onoffswitch"></label>
								   </div>
								</div>
							</div>
						</div>						
						<div class="row" ng-show="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].isFixedTourTimeSlotAvailable">
							<div class="col-sm-6 col-md-6 col-lg-6">
								<div class="form-group">
								  <label for="dsTimeSlot" class="control-label">Time slot</label>
								  <div class="input-group">
									 <div class="input-group">
									 	<input class="form-control" id="dsTimeSlot" name="dsTimeSlot" placeholder="Time-slot" type="text" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].startTime" ng-disabled="vm.onlyCapacityEditAllowed">
									 	<span class="input-group-addon customized-inputGroup-addon" id="dsTimeSlotCalendarIcon">
									 		<i class="fa fa-clock-o" aria-hidden="true"></i>
									 	</span>
									 </div>
								  </div>
								</div>
							</div>
						</div>
						<br>
						<div class="dsCreate text-center modal-footer">
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="!vm.editingTheSession">Add</a>
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="vm.editingTheSession">Ok</a>
						</div>
					</div>
					<div id="session_repeat" class="tab-pane fade">
						<!--<div class="row">
							 <div class="col-sm-12 col-md-12 col-lg-12">
							   <label for="sdSTimeSwitch" class="control-label">Create a Repeat Series?</label>
							   <div class="fixedTouronoffswitch fixed-departure-onoffswitch tours_sd_st">
								  <input type="checkbox" name="repeat-series-onoffSwitch" class="fixedTouronoffswitch-checkbox" ng-model="vm.isFixedDepartureSeriesAvailable" id="repeat-series-onoffSwitch" ng-click="vm.initilizeTheRepeatSeriesData()">
								  <label class="fixedTouronoffswitch-label" for="repeat-series-onoffSwitch"></label>
							   </div>
							</div>
						</div>-->
					
						<div id="repeatSessionDetails">							
							<div class="row">
								<div class="col-sm-6 col-lg-6 col-md-6">
								   <div class="form-group">
									  <label for="dsRepeat" class="control-label">Repeat</label>
									  <div class="input_group">
										 <div>
											<select class="form-control" id="dsRepeat" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].repeatBehavior" ng-disabled="vm.onlyCapacityEditAllowed">
											   <option value="Do not repeat">Select Repeat Behavior</option>
											   <option value="Repeat Daily">Repeat Daily</option>
											   <option value="Repeat Weekly">Repeat Weekly</option>
											</select>
										 </div>
									  </div>
								   </div>
								</div>
							</div>
							<div class="row ds_repeat_daily">
								<div class="col-sm-6 col-md-6 col-lg-6">
									<div class="form-group">
									  <label for="dsRepeatTill" class="control-label">Repeat until</label>
									  <div class="input_group">
										 <div class="input-group">
										 	<input class="form-control" id="dsRepeatTill" name="dsRepeatTill" placeholder="Repeat till..." type="" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].repeatTillDate" ng-disabled="vm.onlyCapacityEditAllowed">
										 	<span class="input-group-addon" id="dsRepeatTillCalendarIcon">
										 		<i class="fa fa-calendar" aria-hidden="true"></i>
										 	</span>
										 </div>
									  </div>
									</div>
								</div>
								<div class="col-sm-6 col-md-6 col-lg-6 ds_repeat_daily_except">
									<div class="form-group"><label class="control-label">Except On</label><br>
									   <select id="dailyExcept" multiple="multiple" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].notRepeatOnDays" ng-disabled="vm.onlyCapacityEditAllowed">
											<option value="Monday">Monday</option>
											<option value="Tuesday">Tuesday</option>
											<option value="Wednesday">Wednesday</option>
											<option value="Thursday">Thursday</option>
											<option value="Friday">Friday</option>
											<option value="Saturday">Saturday</option>
											<option value="Sunday">Sunday</option>
										</select>
									</div>
								</div>
								<div class="col-sm-6 col-md-6 col-lg-6 dsRepeatWeekly">
									<div class="form-group"><label class="control-label">Repeat On</label><br>
									   <select id="weeksRepeatOn" multiple="multiple" ng-model="vm.fixedProductSchedule[vm.fixedDepartureSessionCounter].repeatOnDays" ng-disabled="vm.onlyCapacityEditAllowed">
											<option value="Monday">Monday</option>
											<option value="Tuesday">Tuesday</option>
											<option value="Wednesday">Wednesday</option>
											<option value="Thursday">Thursday</option>
											<option value="Friday">Friday</option>
											<option value="Saturday">Saturday</option>
											<option value="Sunday">Sunday</option>
										</select>
									</div>
								</div>
							</div>
						</div>
						<br>
						<div class="dsCreate text-center modal-footer">
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="!vm.editingTheSession">Add</a>
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="vm.editingTheSession">Ok</a>
						</div>
					</div>
					<div id="tours_Pc" class="tab-pane fade">
						<div class="row">
							<div class="col-sm-12 col-md-12 col-lg-12" ng-repeat="pricing in vm.sessionPricing track by $index">
								<div class="row" ng-show="pricing.pricingType != 'Group' && pricing.pricingType != 'Custom'">
									<div class="col-sm-6 col-md-6 col-lg-6" >
										 <div class="form-group">
											<label for="dsPriceAdult" class="control-label">{{pricing.pricingType}}</label>
											<div class="input_group">
											   <div class="input-group">
												  <span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
												  <input type="text" class="form-control" name="dsPriceAdult" id="dsPriceAdult"  placeholder="Ex: 2000" ng-model="pricing.price" ng-disabled="vm.onlyCapacityEditAllowed"/>
											   </div>
											</div>
										 </div>
									</div>
								</div>
								<div class="row" ng-show="pricing.pricingType == 'Group'">
									<div class="col-sm-6 col-md-6 col-lg-6">
										 <div class="form-group">
											<label for="dsPriceAdult" class="control-label">Group: From {{pricing.minGroupSize}} to {{pricing.maxGroupSize}}</label>
											<div class="input_group">
											   <div class="input-group">
												  <span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
												  <input type="text" class="form-control" name="dsPriceAdult" id="dsPriceAdult"  placeholder="Ex: 2000" ng-model="pricing.price" ng-disabled="vm.onlyCapacityEditAllowed"/>
											   </div>
											</div>
										 </div>
									</div>
									<div class="col-sm-6 col-md-6 col-lg-6" ng-show="pricing.pricingType == 'Group'">
										 <div class="form-group">
											<label for="dsPriceAdult" class="control-label">Pricing By</label>
											<div class="input_group">
											   <div class="input-group">
												  <span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
												  <select class="form-control" id="pricefor" ng-model="pricing.groupOption" ng-disabled="vm.onlyCapacityEditAllowed">
														<option>Per Group</option>
														<option>Per Person</option>
													</select>
											   </div>
											</div>
										 </div>
									</div>
								</div>
								<div class="row"  ng-show="pricing.pricingType == 'Custom'">
									<div class="col-sm-6 col-md-6 col-lg-6">
										 <div class="form-group">
											<label for="dsPriceAdult" class="control-label">Custom: {{pricing.customLabel}}</label>
											<div class="input_group">
											   <div class="input-group">
												  <span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
												  <input type="text" class="form-control" name="dsPriceAdult" id="dsPriceAdult"  placeholder="Ex: 2000" ng-model="pricing.price" ng-disabled="vm.onlyCapacityEditAllowed"/>
											   </div>
											</div>
										 </div>
									</div>
									<div class="col-sm-6 col-md-6 col-lg-6" ng-show="pricing.pricingType == 'Custom'">
										 <div class="form-group">
											<label for="dsPriceAdult" class="control-label">Seats Used</label>
											<div class="input_group">
											   <div class="input-group">
												  <span class="input-group-addon"><i class="fa fa-inr" aria-hidden="true"></i></span>
												  <input type="text" class="form-control" name="dsPriceAdult" id="dsPriceAdult"  placeholder="Ex: 2000" ng-model="pricing.seatsUsed" ng-disabled="vm.onlyCapacityEditAllowed"/>
											   </div>
											</div>
										 </div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
								<div class="form-group">
	                                <label for="tours_sa_limited" class="control-label">Seats capacity</label>
	                                <p class="sub_desc">You can limit capacity for each batch  or run of fixed date tour. Or  make it unlimited if there is no capacity limit.</p>
	                                <div class="input_group col-md-4 col-lg-4 col-sm-12 col-xs-12 padding-zero">
	                                    <select class="form-control" id="tours_sa_limited" ng-model="vm.sessionSeatsLimitType" name="tours_sa_limited">
	                                    	<option value="select">Select</option>
											<option value="limited">Limited</option>
											<option value="unlimited">Unlimited</option>
										</select>
	                                </div>
	                            </div>
	                        </div>
	                        <div class="col-sm-12 col-md-12 col-lg-12 limited_container" ng-show="vm.sessionSeatsLimitType == 'limited'">
								<div class="row">
									<div class="col-sm-4 col-md-4 col-lg-4 ">
										<div class="form-group">
											<div class="input_group">
												<div class="input-group">
													<span class="input-group-addon">limit</span>
													<input type="text" class="form-control" name="tours_sa_limit_members" ng-model="vm.fixedProductScheduleCapacities[vm.fixedDepartureSessionCounter].sessionSeatLimit" id="tours_sa_limit_members"  placeholder="Ex: 15"/>
												</div>
											</div>
										</div>
									</div>
									<div class="col-sm-6 col-md-6 col-lg-4 text-readable13 availability padding-five">
                                        <label class="checkbox-inline">
                                        	<input type="checkbox" name="show_to_guests" value="show" ng-model="vm.fixedProductScheduleCapacities[vm.fixedDepartureSessionCounter].isSessionAvailabilityVisibleToGuests" id="show-availability">
                                        	<span>Show availability to guests</span>
                                        </label>
                                     </div>
								</div>
							</div>
						</div>
						<br>
						<div class="dsCreate text-center modal-footer">
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="!vm.editingTheSession">Add</a>
							<a href="#" class="btn btn-primary" id="createDepartureSessionButton" ng-click="vm.createDepartureSession()" ng-if="vm.editingTheSession">Ok</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<a id="pricingApplicability" data-toggle="modal" data-target="#pricing-applicable-confirmation" style="display: none"></a>  
	<div id="pricing-applicable-confirmation" class="modal fade" tabindex="-1" role="dialog">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title">Pricing options modified!</h4>
	            </div>
	            <div class="modal-body">
	                <p> This tour has existing sessions, do you want to apply price changing to these sessions?</p>
	                <a ng-click="vm.askExtraConfirmation(true)" onclick="closeModal('#pricing-applicable-confirmation')" class="btn btn-success pull-left margin-right btn-sm">Yes</a>
	                <a ng-click="vm.askExtraConfirmation(false)" onclick="closeModal('#pricing-applicable-confirmation')" class="btn btn-danger btn-sm margin-bottom">No</a> 
	            </div>
	            <div class="modal-footer">
	                <button type="button" data-dismiss="modal" class="btn btn-secondary">Close</button>
	            </div>
	        </div>
	    </div>
	</div>
	<a id="sessionCreatedWithModifiedPrice" data-toggle="modal" data-target="#session-created-modified" style="display: none"></a>  
	<div id="session-created-modified" class="modal fade" tabindex="-1" role="dialog">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title">New Sessions created!</h4>
	            </div>
	            <div class="modal-body">
	                <p> You have created new sessions of this tour with modified price specific to some sessions. Do you want to apply these pricing to those new sessions?</p>
	                <a ng-click="vm.saveTheEditedProduct(true)" onclick="closeModal('#pricing-applicable-confirmation')" class="btn btn-success pull-left margin-right btn-sm">Yes</a>
	                <a ng-click="vm.saveTheEditedProduct(false)" onclick="closeModal('#pricing-applicable-confirmation')" class="btn btn-danger btn-sm margin-bottom">No</a> 
	            </div>
	            <div class="modal-footer">
	                <button type="button" data-dismiss="modal" class="btn btn-secondary">Close</button>
	            </div>
	        </div>
	    </div>
	</div>

	<a id="navigatingFromAddProduct" data-toggle="modal" data-target="#navigate-from-addProduct" style="display: none"></a>
	<div id="navigate-from-addProduct" class="modal fade" tabindex="-1" role="dialog">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title"><b>You have unsaved changes!</b></h4>
	            </div>
	            <div class="modal-body">
	                <p>If you leave this page, all unsaved changes will be lost. Are you sure you want to leave this page?</p>
	                <a class="btn btn-primary outline pull-left margin-right btn-sm" id="navigate-from-addProduct-no">Cancel</a>
	                <a class="btn btn-danger btn-sm margin-bottom" id="navigate-from-addProduct-yes">Leave Page</a> 
	            </div>
	            <div class="modal-footer">
	                <button id="navigate-from-addProduct-close" type="button" data-dismiss="modal" class="btn btn-secondary" style="display: none;">Close</button>
	            </div>
	        </div>
	    </div>
	</div>
</div>
<a class="btn btn-primary pull-right" data-toggle="modal" data-target="#confirm-navigation-to-sessions" style="display: none" id="confirm-navigation-to-sessions-btn"></a>
<div id="confirm-navigation-to-sessions" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Repeative session!</h4>
            </div>
            <div class="modal-body">
                <p> This is the repeative session. To get the details of the required date, please go to sessions tab. </p>
                <a ui-sref="host.calendar" class="btn btn-warning pull-left margin-right btn-sm">Go to Sessions</a>
                <a data-dismiss="modal" class="btn btn-default btn-sm margin-bottom">No</a>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="lib/scripts-inside-html/js/multiselect.js"></script>
<script type="text/javascript" src="lib/scripts-inside-html/ckeditor/ckeditor.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC8QX0vYZ8GdosLz3mHlHHuwyOYVqz5TxI&libraries=places&callback=initAutocomplete"></script>
<script src="modules/core/client/scripts/showPreview.js"></script>
<script>
	function closeModal(modalId) {
        $(modalId).fadeOut('slow');
        $('.modal-backdrop').remove();
    }
	changeTab = function (tabId) {
		// First take the screen to top
		$('html, body').animate({scrollTop : 0},800);
      	// return false;

		// Scrolling to top will be done in 800 ms. So call next tab method after 1 sec.
		setTimeout(function() {
		  nowChangeTab(tabId);
		}, 1000)
	}

	nowChangeTab = function (tabId) {
		$('#addProductabs a[href="#'+tabId+'"]').tab('show');
		if(window.innerWidth <= 767) {
			$('#'+tabId+'_Selector').addClass('active');
			$('.nav-tabs-dropdown').each(function(i, elm) {
			    $(elm).text($('#'+tabId+'_Selector').text());
			});
		}
	}

	changeTabWithNoTabId = function(pressedButton) {
		if(pressedButton == 'previous') {
			if ($("#tours_bd").is(':visible'))
				alert('you are at the first tab');
			else if ($("#tours_pricing").is(':visible'))
				nowChangeTab('tours_bd');
			else if ($("#tours_sa").is(':visible'))
				nowChangeTab('tours_pricing');
			else if ($("#tours_itinerary").is(':visible'))
				nowChangeTab('tours_sa');
			else if($("#tours_guidelines").is(':visible'))
				nowChangeTab('tours_itinerary');
			else
				nowChangeTab('tours_guidelines');
		} else {
			if ($("#tours_bd").is(':visible'))
				nowChangeTab('tours_pricing');
			else if ($("#tours_pricing").is(':visible'))
				nowChangeTab('tours_sa');
			else if ($("#tours_sa").is(':visible'))
				nowChangeTab('tours_itinerary');
			else if ($("#tours_itinerary").is(':visible'))
				nowChangeTab('tours_guidelines');
			else if($("#tours_guidelines").is(':visible'))
				nowChangeTab('tours_media');
			else
				alert('you are at the last tab');
		}
	}

	$('.nav-tabs-dropdown').each(function(i, elm) {
	    $(elm).text($(elm).next('ul').find('li.active a').text());
	});

	$('.nav-tabs-dropdown').on('click', function(e) {
	    e.preventDefault();
	    $(e.target).toggleClass('open').next('ul').slideToggle();
	});


	$('#addProductabs a[data-toggle="tab"]').on('click', function(e) {
	    e.preventDefault();
	    if ($(window).width() < 767) {
	    	$(e.target).closest('ul').hide().prev('a').removeClass('open').text($(this).text());
	    }
	});

	$(".onoffswitch").on("change","#myonoffswitch",function(){
		if($(this).is(':checked')){
			$(".tour_help_info").show();
			$(".tour_main_content").attr("class","col-sm-10 col-md-10 col-lg-10 tour_main_content");
		}else{
			$(".tour_help_info").hide();
			$(".tour_main_content").attr("class","col-sm-12 col-md-12 col-lg-12 tour_main_content");
		}
	});
	$(".tours_sa_ty").on("change","#tours_sa_ty-onoffswitch",function(){
		if($(this).is(":checked")){
			$(".available_months").hide();
		}else{
			$(".available_months").show();
		}
	});
	$("#tours_sa").on("change","#tours_sa_timeslot",function(){
		if($(this).val() == "Fixed Slots"){
			$(".fixed_timeslot").show();
		}else{
			$(".fixed_timeslot").hide();
		}
	});
	$("#tours_sa").on("change","input[type=radio][name=time_required]",function() {
		if($(this).val() == "unavailable") {
			$(".tours_sa_unavailable").show();
			$(".tours_sa_open_dates").hide();
			$(".tours_sa_fixed_departure").hide();
		} else if($(this).val() == "Open Date"){
			$(".tours_sa_open_dates").show();
			$(".tours_sa_fixed_departure").hide();
			$(".tours_sa_unavailable").hide();
		} else if($(this).val() == "Fixed Departure"){
			$(".tours_sa_open_dates").hide();
			$(".tours_sa_fixed_departure").show();
			$(".tours_sa_unavailable").hide();
		}
	});

    $(document).ready(function() {
    	$('#dsStartDateCalendarIcon').click(function() {
	       $(document).ready(function(){
	           $("#dsStartDate").datepicker().focus();
	       });
	   	});
    	var date = new Date();
		date.setDate(date.getDate());
      	var options={
	        format: "dd MM yyyy",
	        todayHighlight: true,
	        autoclose: true,
	       	startDate: date
	    };
      	$('#dsStartDate').datepicker(options);
    })

	$(document).ready(function() {
    	$('#dsTimeSlotCalendarIcon').click(function(){
	       $(document).ready(function(){
	           $('#dsTimeSlot').datetimepicker().focus();
	       });
	   	});
    	$('#dsTimeSlot').datetimepicker({
	        format: 'LT'
	    });
    })

    $(document).ready(function() {
    	$('#dsRepeatTillCalendarIcon').click(function(){
	       $(document).ready(function(){
	           $('#dsRepeatTill').datepicker().focus();
	       });
	   	});
    	var date = new Date();
		date.setDate(date.getDate());
      	var options={
	        format: "dd MM yyyy",
	        todayHighlight: true,
	        autoclose: true,
	       	startDate: date
	    };
      	$('#dsRepeatTill').datepicker(options);
    })

	function openFixedDeparturePanel () {
		$(".tours_sa_open_dates").hide();
		$(".tours_sa_unavailable").hide();
	    $(".tours_sa_fixed_departure").show();
	}
	function openOpenDeparturePanel () {
		$(".tours_sa_unavailable").hide();
	    $(".tours_sa_fixed_departure").hide();
	    $(".tours_sa_open_dates").show();
	}
	function openUnavailableDeparturePanel() {
		$(".tours_sa_unavailable").show();
	    $(".tours_sa_fixed_departure").hide();
	    $(".tours_sa_open_dates").hide();
	}

	$(document).ready(function() {
	  	$('#months').multiselect({

	  	});
		$('#weeksRepeatOn').multiselect ({
			nonSelectedText: 'Select Days'
		});
		$('#dailyExcept').multiselect({
			nonSelectedText: 'Select Days'
		});
	});

	$("#departureSession").on("change","#dsRepeat",function(e) {
		e.preventDefault();
		if($(this).val() == "Do not repeat"){
			$(".ds_repeat_daily").hide();
          	$(".dsRepeatWeekly").hide();
          	$(".ds_repeat_daily_except").hide();
		}else if($(this).val() == "Repeat Daily"){
			$(".ds_repeat_daily").show();
			$(".ds_repeat_daily_except").show();
			$(".dsRepeatWeekly").hide();
		}else if($(this).val() == "Repeat Weekly"){
			$(".ds_repeat_daily").show();
			$(".dsRepeatWeekly").show();
			$(".ds_repeat_daily_except").hide();
		}
	});
	$("#closeDepartureSession").on("click", function(e){
		e.preventDefault();
		$('body').css('overflow', 'scroll');
		$("#departureSession").fadeOut();
		$('.modal-backdrop').remove();
	})

    $(document).ready(function() {
       $('#months').multiselect({
       });
    });

	CKEDITOR.replace('describe_tour_briefly', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

	CKEDITOR.replace('cancellationPolicies', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

	CKEDITOR.replace('tourItinerary', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

	CKEDITOR.replace('tour_guidelines', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

	CKEDITOR.replace('tour_inclusions', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

	CKEDITOR.replace('tour_exclusions', {
		toolbarGroups: [
            {name: 'basicstyles', groups: 'basicstyles'},
            {name: 'paragraph',   groups: [ 'list', 'indent', 'align']}
       	]
	});

    $("#productTagging").select2({
      	tags: true,
      	placeholder: "Type and Enter"
    });

	function initAutocomplete() {
		var destination = document.getElementById('tour_main_destination');
    	var searchBox = new google.maps.places.SearchBox(destination);
	}

	var slots= ['Select', 
				'00:00 AM','00:15 AM', '00:30 AM', '00:45 AM' , '01:00 AM', '01:15 AM', '01:30 AM', '01:45 AM',
                '02:00 AM','02:15 AM', '02:30 AM', '02:45 AM' , '03:00 AM', '03:15 AM', '03:30 AM', '03:45 AM',
                '04:00 AM','04:15 AM', '04:30 AM', '04:45 AM' , '05:00 AM', '05:15 AM', '05:30 AM', '05:45 AM',
                '06:00 AM','06:15 AM', '06:30 AM', '06:45 AM' , '07:00 AM', '07:15 AM', '07:30 AM', '07:45 AM',
                '08:00 AM','08:15 AM', '08:30 AM', '08:45 AM' , '09:00 AM', '09:15 AM', '09:30 AM', '09:45 AM',
                '10:00 AM','10:15 AM', '10:30 AM', '10:45 AM' , '11:00 AM', '11:15 AM', '11:30 AM', '11:45 AM',
                '12:00 PM','12:15 PM', '12:30 PM', '12:45 PM' , '01:00 PM', '01:15 PM', '01:30 PM', '01:45 PM',
                '02:00 PM','02:15 PM', '02:30 PM', '02:45 PM' , '03:00 PM', '03:15 PM', '03:30 PM', '03:45 PM',
                '04:00 PM','04:15 PM', '04:30 PM', '04:45 PM' , '05:00 PM', '05:15 PM', '05:30 PM', '05:45 PM',
                '06:00 PM','06:15 PM', '06:30 PM', '06:45 PM' , '07:00 PM', '07:15 PM', '07:30 PM', '07:45 PM',
                '08:00 PM','08:15 PM', '08:30 PM', '08:45 PM' , '09:00 PM', '09:15 PM', '09:30 PM', '09:45 PM',
                '10:00 PM','10:15 PM', '10:30 PM', '10:45 PM' , '11:00 PM', '11:15 PM', '11:30 PM', '11:45 PM'];

    var counter = -1;
    function addSelectorElement(changedValue, numOfElements) {
    	if(changedValue && $(changedValue).val() != 'Fixed Slots') {
    		$('#addSelectorHere').empty();
    		counter = -1;
    		return;
    	}
    	createDynamicTimeslotSelection();
    }
    function createTimeslotsEditMode (valueArray) {
    	$(".fixed_timeslot").show();
    	for (var index = 0; index <= valueArray.length; index ++) {
			createDynamicTimeslotSelection();
			if (index < valueArray.length)
				$('#selector'+counter).val(valueArray[index]);
			else {
				$('#parentdiv'+counter).remove();
			}
    	}
    }
    
    		
    function createDynamicTimeslotSelection() {
    	counter++;
    	parentDivId = 'parentdiv'+counter;
    	spanId = 'span'+counter;
    	anchorId = 'anchor'+counter;
    	selectorId = 'selector'+counter;
    	for(var index = 0; index < angular.element('#addSelectorHere').scope().timeslots.length; index++)
    		slots.splice(slots.indexOf(angular.element('#addSelectorHere').scope().timeslots[index]), 1);
    	
    	var parentDiv = $('<div></div>').attr('id', parentDivId).attr('class', 'input-group');
    	$(parentDiv).css('float','left');
    	$(parentDiv).css('width','140px');
    	$(parentDiv).css('margin-left','20px');
    	$(parentDiv).css('margin-top','15px');
    	$(parentDiv).css('padding-left','-10px');
    	$('#addSelectorHere').append(parentDiv);
    	var span = $('<span></span>').attr('id',spanId).attr('class', 'input-group-addon');
    	$(span).css('margin-right', '-10px !important');
    	$(parentDiv).append(span);
    	$(span).append($('<i></i>').attr('class', 'zmdi zmdi-time')); 
    	$(parentDiv).append($('<select></select>').attr('id', selectorId).attr('class', 'timslotSelector').attr('onchange','addTimeSlots('+selectorId+')'));
    	if (counter > 0) {
    		$(parentDiv).append($('<span></span>').attr('id',counter).attr('class', 'glyphicon glyphicon-remove-sign timeslotRemove').attr('onclick', 'removeTimeslot(this)'));
    	}

		$(".timslotSelector").select2({
		  data: slots,
		  width: '100px'
		})
    }
   	
    function removeTimeslot(removeThisDiv) {
    	var id = 'selector' + removeThisDiv.id;
    	var element = document.getElementById(id);
    	$('#parentdiv'+removeThisDiv.id).remove();
    	
    	angular.element('#addSelectorHere').scope().timeslots.splice(angular.element('#addSelectorHere').scope().timeslots.indexOf($(id).val()), 1);
    }

    function addTimeSlots (id) {
    	if(!angular.element('#addSelectorHere').scope().timeslotsTracker.has($(id).val())) {
    		angular.element('#addSelectorHere').scope().timeslotsTracker.add($(id).val());
    		angular.element('#addSelectorHere').scope().timeslots.push($(id).val());
    	} else {
    	}
    }

	$(document).ready(function(){
	    angular.element('#tours').scope().showEditSuccessMsg();
	});

	 $(document).ready(function() {
    	$('#dsStartDateCalendarIcon').click(function() {
	       $(document).ready(function(){
	           $("#dsStartDate").datepicker().focus();
	       });
	   	});
    	var date = new Date();
		date.setDate(date.getDate());
      	var options={
	        format: "dd MM yyyy",
	        todayHighlight: true,
	        autoclose: true,
	       	startDate: date
	    };
      	$('#dsStartDate').datepicker(options);
    })
</script>
<script>
	$(document).ready(function() {
    	$('#dsTimeSlotCalendarIcon').click(function(){
	       $(document).ready(function(){
	           $('#dsTimeSlot').datetimepicker().focus();
	       });
	   	});
    	$('#dsTimeSlot').datetimepicker({
	        format: 'LT'
	    });
    })
</script>
<script>
    $(document).ready(function() {
    	$('#dsRepeatTillCalendarIcon').click(function(){
	       $(document).ready(function(){
	           $('#dsRepeatTill').datepicker().focus();
	       });
	   	});
    	var date = new Date();
		date.setDate(date.getDate());
      	var options={
	        format: "dd MM yyyy",
	        todayHighlight: true,
	        autoclose: true,
	       	startDate: date
	    };
      	$('#dsRepeatTill').datepicker(options);
    })
</script>

<script>
	function fetchSessionsOfThisProduct(productId) {
		console.log(productId);
		$.ajax({
	    	url:'/api/host/product/productsession/' + productId,
	        type:'GET',
	        dataType: 'json',
	      	success: function( sessions ) {		      		
	      		angular.element('#dsRepeatTill').scope().setTheSessionListItem(sessions);
	        }
	    });
	}
</script>
<script type="text/template" id="qq-template">

    <div class="qq-uploader-selector qq-uploader qq-gallery" qq-drop-area-text="Drop files here">
        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
            <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
        </div>
        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
            <span class="qq-upload-drop-area-text-selector"></span>
        </div>
        <div class="qq-upload-button-selector qq-upload-button" style="background-color: #40C4FF !important;" ng-click="initializeImageUploadErrorContent(false)">
            <div>Upload</div>
        </div>
        <span class="qq-drop-processing-selector qq-drop-processing">
            <span>Processing dropped files...</span>
            <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list" role="region" aria-live="polite" aria-relevant="additions removals">
            <li style="max-width: 255px !important;">
                <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
                <div class="qq-progress-bar-container-selector qq-progress-bar-container">
                    <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                </div>
                <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                <div class="qq-thumbnail-wrapper" style="width: 255px;">
                    <img class="qq-thumbnail-selector" qq-max-size="255" qq-server-scale>
                </div>
                <button type="button" class="qq-upload-cancel-selector qq-upload-cancel">X</button>
                <button type="button" class="qq-upload-retry-selector qq-upload-retry">
                    <span class="qq-btn qq-retry-icon" aria-label="Retry"></span>
                    Retry
                </button>

                <div class="qq-file-info">
                    <div class="qq-file-name" style="color: #929292">
                        <span class="qq-upload-file-selector qq-upload-file"></span>
                        <span class="qq-edit-filename-icon-selector qq-btn qq-edit-filename-icon" aria-label="Edit filename"></span>
                    </div>
                    <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                    <span class="qq-upload-size-selector qq-upload-size"></span>
                    <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">
                        <span class="qq-btn qq-delete-icon" aria-label="Delete"></span>
                    </button>
                    <button type="button" class="qq-btn qq-upload-pause-selector qq-upload-pause">
                        <span class="qq-btn qq-pause-icon" aria-label="Pause"></span>
                    </button>
                    <button type="button" class="qq-btn qq-upload-continue-selector qq-upload-continue">
                        <span class="qq-btn qq-continue-icon" aria-label="Continue"></span>
                    </button>
                </div>
            </li>
        </ul>

        <dialog class="qq-alert-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Close</button>
            </div>
        </dialog>

        <dialog class="qq-confirm-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">No</button>
                <button type="button" class="qq-ok-button-selector">Yes</button>
            </div>
        </dialog>

        <dialog class="qq-prompt-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <input type="text">
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Cancel</button>
                <button type="button" class="qq-ok-button-selector">Ok</button>
            </div>
        </dialog>
    </div>
</script>
<script>
	$(document).ready(function() {
		var dat = new Date();
		var productId;
		if (location.pathname.split('/')[3] != 'add') {
			if (location.pathname.split('/')[3] == 'edit')
				productId = location.pathname.split('/')[4];
			else
				productId = location.pathname.split('/')[3];
		}
	    var photoUploader = new qq.FineUploader({
	        element: document.getElementById("product-photo-uploader"),
	        template: 'qq-template',
	        debug: false,
	        session: {
	           endpoint: '/api/product/previouslyUploadedFiles/' + productId
	        },
	        request: {
	            customHeaders: {},
	            endpoint: "/api/product/productPictureUploads/",
	            filenameParam: "qqfilename",
	            filenameParamName: 'abc',
	            forceMultipart: true,
	            inputName: "productPictures",
	            method: "POST",
	            params: {},
	            paramsInBody: true,
	            totalFileSizeName: "qqtotalfilesize",
	            uuidName: "qquuid"
	        },        
	        validation: {
	            allowedExtensions: ['jpeg', 'jpg', 'png'],
	            sizeLimit: 5000000,
	            minSizeLimit: 0,
	            itemLimit: 5,
	            stopOnFirstInvalidFile: false
	        },
	        deleteFile: {
		        enabled: true,
		        forceConfirm: true,
		        endpoint: '/api/product/productPictureUploadDelete',
		        method: "POST"
		    },
		    callbacks: {
	            onComplete: function(id, name, responseJSON, maybeXhr) {
	            	var fileObject = {uuid: responseJSON.newUuid, size: responseJSON.size, name: responseJSON.name}
	            	angular.element('#product-photo-uploader').scope().uploadedProductPicturesForThisProduct.push(fileObject);
	            },
	            onDeleteComplete: function(id, xhrOrXdr, isError, responseJSON) {
	            	var item = JSON.parse(xhrOrXdr.response);
	            	var filesObjectArray = angular.element('#product-photo-uploader').scope().uploadedProductPicturesForThisProduct;
	            	var deleteIndex = -1;
	            	for(var index = 0; index < filesObjectArray.length; index++) {
					    if (filesObjectArray[index].uuid == item['deletedUuid']) {
					    	deleteIndex = index;
					    	break;
					    }
					}
	            	angular.element('#product-photo-uploader').scope().uploadedProductPicturesForThisProduct.splice(deleteIndex, 1);
	            	angular.element('#product-photo-uploader').scope().setUploadedPcituresUrls(true);
	            },
	            onError: function (id, name, reason, maybeXhrOrXdr) {
	            	angular.element('#product-photo-uploader').scope().showImageUploadErrors(reason);
	            },
	            onSessionRequestComplete: function(response, success, xhrOrXdr) {
	            	
	            }
	        },
	        showMessage: function(message) {
	        	
		        //either include an empty body, or some other code to display (error) messages
		    }
	    });
		$('.hostHome').click(function(){
		    if (this.id != 'tours_media_Selector')
		    	angular.element('#product-photo-uploader').scope().initializeImageUploadErrorContent(true);
		});
	});

	$(document).on("click", ".add-product", function () {
		if($("#successMessageContainer:visible"))
			$("#successMessageContainer").hide();
		if($('#errorMessageContainer:visible'))
			$('#errorMessageContainer').hide();
	});
    var mapUploader = new qq.FineUploader({
        element: document.getElementById("product-map-uploader"),
        request: {
            customHeaders: {},
            endpoint: "/api/product/productMapUploads/",
            filenameParam: "qqfilename",
            forceMultipart: true,
            inputName: "productMaps",
            method: "POST",
            params: {},
            paramsInBody: true,
            totalFileSizeName: "qqtotalfilesize",
            uuidName: "qquuid"
        },
        validation: {
            allowedExtensions: ['jpeg', 'jpg', 'png'],
            sizeLimit: 5000000,
            minSizeLimit: 0,
            itemLimit: 3,
            stopOnFirstInvalidFile: true
        },
        deleteFile: {
	        enabled: true,
	        forceConfirm: true,
	        endpoint: '/api/product/productMapUploadDelete',
	        method: "POST"
	    },
	    callbacks: {
            onComplete: function(id, name, responseJSON, maybeXhr) {
            	angular.element('#product-map-uploader').scope().uploadedProductMapsForThisProduct.push(responseJSON.newUuid);
            },
            onDeleteComplete: function(id, xhrOrXdr, isError) {
            	var item = xhrOrXdr.response.deletedUuid;
            	var index = angular.element('#product-map-uploader').scope().uploadedProductMapsForThisProduct.indexOf(item);
            	angular.element('#product-map-uploader').scope().uploadedProductMapsForThisProduct.splice(index, 1);
            }

        }
    });
</script>